function ElasTestRemoteControl(){this.recordRTC=null}ElasTestRemoteControl.prototype.startRecording=function(o){var e={type:"video",mimeType:"video/webm",numberOfAudioChannels:2,sampleRate:48e3};this.recordRTC=RecordRTC(o,e),this.recordRTC.startRecording()},ElasTestRemoteControl.prototype.stopRecording=function(){this.recordRTC?this.recordRTC.length?this.recordRTC[0].stopRecording(function(o){this.recordRTC[1]?this.recordRTC[1].stopRecording(function(o){console.info("[1] Recorded track: "+o)}):console.info("[0] Recorded track: "+o)}):this.recordRTC.stopRecording(function(o){console.info("Recorded track: "+o)}):console.warn("No recording found.")},ElasTestRemoteControl.prototype.saveRecordingToDisk=function(o){if(this.recordRTC){var e=this.recordRTC.save(o);console.info(e)}else console.warn("No recording found.")},ElasTestRemoteControl.prototype.openRecordingInNewTab=function(){this.recordRTC?window.open(this.recordRTC.toURL()):console.warn("No recording found.")},ElasTestRemoteControl.prototype.recordingToData=function(){var o=this;if(o.recordRTC){var e=o.recordRTC.getBlob(),n=new window.FileReader;n.readAsDataURL(e),n.onloadend=function(){o.recordingData=n.result}}else console.warn("No recording found.")},ElasTestRemoteControl.prototype.getStats=function(o){var e={},n=0;if(peerConnections){console.info("peerConnections found");const t=setInterval(()=>{let r={};if(n>=5&&n<=35){if(peerConnections[0].getStats(null).then(o=>{o.forEach(o=>{let e=o.type;r[e]=o})}),e[++n]=r,console.info(e),36==n){clearInterval(t),console.info("num = "+n);const r="stats_"+o+".json",i=JSON.stringify(e,null,"\t"),c=document.createElement("a");c.href="data:,"+encodeURIComponent(i),c.download=r,c.click()}}else++n},1e3);console.info("finish")}else console.warn("No peerConnections found.")};var peerConnections=[],origPeerConnection=window.RTCPeerConnection;window.RTCPeerConnection=function(o,e){var n=new origPeerConnection(o,e);return peerConnections.push(n),n},window.RTCPeerConnection.prototype=origPeerConnection.prototype;var elasTestRemoteControl=new ElasTestRemoteControl;